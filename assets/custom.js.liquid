$(function() {

    function mailchimpCallback (resp) {
        if (resp.result === 'success') {
            window.document.location = '/collections';
        } else {
          $('#mc-ebedded-subscribe-form input').css('border', '2px solid red');
        }
    }

    $('#mc-embedded-subscribe-form').ajaxChimp({
        url: 'http://vinylloop.us1.list-manage.com/subscribe/post?u=9634918a1dc1d44e6fc9e7cad&amp;id=fe7e4989f1',
        callback: mailchimpCallback
    });

    // Grab soundcloud widget
    var widget = SC.Widget(document.getElementById('soundcloud_widget'));
     widget.bind(SC.Widget.Events.READY, function() {
       console.log('Ready...');
     });
     $('.vinyl-image').click(function() {
       widget.toggle();
     });

    // Rotate Vinyl
    $('.vinyl-image').on('click', function(e) {
      if($(this).hasClass('vinyl-image-playing')) {
        $(this).removeClass('vinyl-image-playing');
      } else {
        $(this).addClass('vinyl-image-playing');
      }
    });

    $('.syllabus-lessons li a').on('click', function(e) {
      e.preventDefault();
      $('.video-block').slideUp('500').empty();
      // Clear old video
      // Append new video
      var url = $(this).data().url + '?rel=0&autoplay=1';
      var videoBlock = $(this).closest('li').find('.video-block')
      var embed = '<iframe width="100%" height="315" src="' + url + '" frameborder="0" allowfullscreen></iframe>';
      videoBlock.append(embed);
      videoBlock.slideDown('500');
    })


});